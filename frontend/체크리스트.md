좋아, 페이지 단위로 쭉 밀어붙일 수 있게 **체크리스트**로 깔끔하게 정리했어. (React + JSX, styled-components, Redux 전제 / TS X)

---

# 공통 선행 작업 (한 번만)

* [x] 라우팅 기초: `/booths/:boothId/menu`, `/order`, `/order/confirm`, `/order/pending/:orderId`, `/order/complete/:orderId`
* [ ] axios 인스턴스 설정(쿠키포함): `withCredentials: true`, `baseURL` 환경변수
* [ ] 전역 상태(slice) 생성
  * [x] `menuSlice` : menus, status, error
  * [x] `cartSlice` : items\[{id, name, price, qty, image}], total, actions(add/remove/inc/dec/clear)
  * [ ] ~`orderSlice`: orderId, status, accountInfo, error~ => 매번 API 호출해서  불러오기
  * [ ] `uiSlice` : modal({open, menuId}), toast, loading
* [ ] 로컬스토리지 퍼시스턴스(booth별로 분리 저장): key = `cart:${boothId}`
* [x] toast 공통 컴포넌트 : toastify 라이브러리 사용
* [ ] 에러/로딩 스피너/스켈레톤 컴포넌트

---

# 1) 전체 메뉴 페이지 `/booths/:boothId/menu`

* [ ] `boothId` URL 파라미터 파싱
* [ ] API 연동: `GET /api/menu?boothId=:boothId` (또는 `/booths/:boothId/foods`)
* [ ] `menuSlice.fetchMenus(boothId)` 디스패치 & 상태 반영 => 있으면 store 데이터 사용. 없으면 불러오기
* [x] 품절 상태 처리
* [x] 카테고리 분류(음식/음료) 렌더링
* [x] 메뉴 카드 클릭 → modal 창 열기
* [x] 하단 고정 바: “주문하기” 버튼
* [x] 좌측 상단 주문내역 아이콘: 주문내역으로 이동
* [x] ~조건: 카트가 비었으면 주문 버튼 클릭 시 토스트 “주문할 메뉴를 선택해주세요.”~ => 이동하도록 변경하고, 장바구니에서 표시해주기
* [x] 주문하기 버튼 클릭 : 라우팅 `/order`
* [ ] 완료 기준: 로딩/에러/빈목록/정상 목록 & 모달 오픈 동작 확인

---

# 2) 음식 상세 정보 팝업 (Modal)

* [ ] 오픈 시 `menuId`로 API 호출: `GET /api/menu/:id`
* [x] 상세 UI: 이미지/이름/설명/가격
* [x] 닫기: X 버튼 & 바깥 클릭 → `uiSlice.closeModal()`
* [x] “장바구니 담기” → `cartSlice.add(item)`
* [x] 장바구니 담을 시 토스트
* [ ] 에러 시: 오류 메시지 + 닫기
* [ ] 완료 기준: 담기 후 수량 배지 반영 & 모달 닫힘

---

# 3) 장바구니 `/order`

* [x] 카트 목록 렌더링(이미지/이름/가격/수량/삭제)
* [x] 수량 `-` 버튼: qty>1일 때 `dec`; `+` 버튼: 재고 초과 방지(옵셔널 검증)
* [x] `×` 삭제 버튼: `remove(itemId)`
* [x] 합계(가격×수량) 실시간 표시
* [x] “주문 확인하기” → `/order/confirm` (카트 비어있으면 메시지 띄우기)
* [x] “더 담으러 가기” → `/booths/:boothId/menu`
* [x] 빈 카트 UI: 메시지 + 메뉴로 가기 버튼
* [ ] 완료 기준: 수량/삭제/합계/라우팅 정상 동작

---

# 4) 주문 상세(이체 안내) `/order/confirm`

* [x] 좌측 상단(->) → 이전페이지로 이동 (장바구니)
* [x] 총 금액: 카트 합계 표시
* [ ] 결제 계좌 정보 로드: `GET /api/booths/:boothId/account` → 은행/계좌/예금주 표시
* [ ] ~성함 입력 컨트롤 & 상태 저장~
* [ ] “이체 완료” 버튼
  * [x] 성함, 전화번호, 개인정보 동의 비어있을 경우 toast
  * [ ] `POST /api/orders/confirm` body: { boothId, items, payerName }
  * [ ] 성공 시 응답 `orderId` 저장 → `/order/pending/:orderId` 이동
  * [ ] 성공 시 성공 toast 띄우기
* [x] 실패 시 토스트 & 현재 페이지 유지
* [ ] 완료 기준: 정상 주문 생성, 실패 처리, 입력 검증

---

# 5) 결제 승인 대기 `/order/pending/:orderId`

* [ ] 진입 시 상태감시 시작
  * [ ] (선호) SSE/WS 클라이언트 추상화: `startOrderStatusListener(orderId)`
  * [ ] (대안) 폴링 3\~5초: `GET /api/orders/:orderId/status`
* [x] 로딩 문구: “주문 확인 중입니다…”
* [x] 장바구니 비우기 (페이지 렌더링 시)
* [ ] 서버에서 `APPROVED` 수신 시 `/order/complete/:orderId` 로 라우팅
  * [x] 결제 확인 토스트 띄우기
* [x] 상단 x 메인 메뉴로 가기
* [ ] 페이지 이탈 시 리소스 정리: SSE/WS 해제 또는 타이머 clear
* [ ] 네트워크 장애 시: 재시도/재연결, 타임아웃 안내(토스트)
* [ ] 완료 기준: 승인 시 자동 이동, 이탈 시 누수 없음

---

# 6) 주문 완료 `/order/complete/:orderId`

* [ ] 주문 요약/완료 메시지 표시(필요 시 `GET /api/orders/:orderId`)
* [x] 상단 x → 메인 메뉴 페이지로 이동
* [x] “주문내역 확인하기” 버튼 클릭 시 → `/orders/:orderId` 페이지로 이동
* [ ] 완료 기준: 정상 표시 & 라우팅

---

# 7) 주문 내역

* [ ] order 데이터를 API로 불러와서 렌더링
* [x] 진행 중인 주문 대기상태 표시
* [x] 취소된 주문 표시
* [x] 승인된 주문 표시
* [x] 좌측 상단 x 클릭시 메인 메뉴 화면으로 이동
* [ ] 추가로 구현하면 좋은 것 : 주문 카드 클릭시 주문한 메뉴 팝업으로 표시


---

# 마감 점검(DoD)

* [ ] 각 페이지 로딩/에러/빈상태/정상 플로우 모두 점검
* [ ] 잘못된 boothId, 만료된 orderId 등 예외 라우팅 처리
* [ ] 모바일 뷰 최적화(styled-components로 반응형)
* [ ] 접근성(키보드 포커스, 모달 포커스 트랩)
* [ ] 성능: 불필요 리렌더 방지(memo/selectors), 이미지 lazy
* [ ] 로컬스토리지 복구 시 총액/수량 일관성 확인
* [ ] QA 시나리오:

  * [ ] 품절 메뉴 클릭 → 담기 차단
  * [ ] 빈 카트로 주문하기 → 토스트
  * [ ] 이체 완료 성함 미입력 → 경고
  * [ ] 대기 중 새로고침 → 리스너 재연결 & 상태 복원
  * [ ] 승인 도착 → 자동 완료 이동

필요하면 각 단계별 보일러플레이트(컴포넌트/슬라이스/스타일)도 바로 찍어줄게. 어느 페이지부터 시작할지 말만 해!

---

# 주문 관리 기능 체크

* [ ] 비우기 : POST 요청 확인
* [ ] 주문 수락 처리 : POST 요청 확인
* [ ] 주문 거절 처리 : POST 요청 확인 
* [x] 영수증 버튼 : 팝업 띄우기
* [x] 헤더 한 줄 전체(row) 차지 + sticky 처리
* [x] 라우팅/경로: `/manager/booths/:boothId/orders` 등록, `paths.manager.orders()` 제공
* [ ] (정리) 현재 임시 구현을 `ManagerOrdersPage.jsx`로 이름/라우트 일원화

# 데이터 파이프라인 (MOCK 기준)

* [x] Step1: boothId → tables (`fetchTables`)
* [x] Step3: tableId → `{ orderIds }` (`fetchOrderIdsByTable`)
* [x] Step4: orderIds → 주문 상세 (`fetchOrderDetails`)
* [x] visit\_id 단위 그룹/집계 (`groupOrdersByVisit`, `summarizeVisitGroup`)
* [x] 오케스트레이션: `loadCards(boothId)`로 카드 데이터 생성
* [ ] 실제 API 연동(axios, 쿠키 포함)으로 MOCK 교체

# 카드 UI/상태

* [x] `OrderCard.jsx` 생성 (active/빈 테이블/상태별 버튼)
* [x] 아이템 리스트, 수량, 체크 토글(초기 해제)
* [x] 시간(최신 created\_at → HH\:mm), 주문자(최신), 금액(추가/총 합계) 표시
* [x] 빈 테이블 메시지( active=false )
* [ ] 아이템 체크 상태 전역 저장(Redux slice) — API 호출 없이 유지
* [ ] 카드 정렬/필터: PENDING 우선, 상태/테이블번호 필터

# 액션 핸들러

* [x] 버튼 핸들러 골격(onApprove/onReject/onClear)
* [ ] 승인/거절 API 연결(방문/주문 단위 확정)
* [ ] 비우기(완료 처리) API 연결 및 UI 갱신
* [ ] 버튼 후 낙관적 업데이트 + 실패 시 롤백/토스트

# 팝업/상세

* [x] 공통 `Modal.jsx` 생성
* [x] 영수증 아이콘 → 팝업 오픈

